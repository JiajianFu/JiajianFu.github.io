<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Robot Design｜Bionic Ostrich Robot - Jiajian Fu&#39;s site</title><meta name="Description" content="this is Jiajian Fu&#39;s profile site"><meta property="og:title" content="Robot Design｜Bionic Ostrich Robot" />
<meta property="og:description" content="It is National second prize winning works of the 10th National College Students Mechanical Innovation Design Competition.The funny thing is, it all started with an idea I had in the shower&hellip;&hellip;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jiajianfu.github.io/posts/ostrichrobot/" /><meta property="og:image" content="https://jiajianfu.github.io/images/IMG_5646.JPG"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-13T16:15:21+08:00" />
<meta property="article:modified_time" content="2023-07-13T16:15:21+08:00" /><meta property="og:site_name" content="Jiajian Fu&#39;s profile site" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jiajianfu.github.io/images/IMG_5646.JPG"/>

<meta name="twitter:title" content="Robot Design｜Bionic Ostrich Robot"/>
<meta name="twitter:description" content="It is National second prize winning works of the 10th National College Students Mechanical Innovation Design Competition.The funny thing is, it all started with an idea I had in the shower&hellip;&hellip;"/>
<meta name="application-name" content="Jiajian Fu&#39;s">
<meta name="apple-mobile-web-app-title" content="Jiajian Fu&#39;s"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://jiajianfu.github.io/posts/ostrichrobot/" /><link rel="prev" href="https://jiajianfu.github.io/posts/mx_2_engineer/" /><link rel="next" href="https://jiajianfu.github.io/posts/clock/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Robot Design｜Bionic Ostrich Robot",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/jiajianfu.github.io\/posts\/ostrichrobot\/"
        },"genre": "posts","keywords": "Bionic Ostrich Robot","wordcount":  5663 ,
        "url": "https:\/\/jiajianfu.github.io\/posts\/ostrichrobot\/","datePublished": "2023-07-13T16:15:21+08:00","dateModified": "2023-07-13T16:15:21+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Jiajian Fu"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Jiajian Fu&#39;s site">Jiajian Fu&#39;s site</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Jiajian Fu&#39;s site">Jiajian Fu&#39;s site</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Robot Design｜Bionic Ostrich Robot</h1><h2 class="single-subtitle">This is a bionic ostrich robot with a metamorphic mechanism on its legs. It is National second prize winning works of the 10th National College Students Mechanical Innovation Design Competition.The funny thing is, it all started with an idea I had in the shower......</h2><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Jiajian Fu</a></span>&nbsp;<span class="post-category">included in <a href="/categories/robotics/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Robotics</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2023-07-13">2023-07-13</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;5663 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;27 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/images/Ostrich/ostrichcover.png"
        data-srcset="/images/Ostrich/ostrichcover.png, /images/Ostrich/ostrichcover.png 1.5x, /images/Ostrich/ostrichcover.png 2x"
        data-sizes="auto"
        alt="/images/Ostrich/ostrichcover.png"
        title="/images/Ostrich/ostrichcover.png" /></div><div class="details toc" id="toc-static"  data-kept="true">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#prologue">Prologue</a></li>
    <li><a href="#design-background">Design Background</a></li>
    <li><a href="#robot-design">Robot Design</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#simulation-analysis">Simulation Analysis</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#material-and-process-selection">Material and Process Selection</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#strength-check">Strength Check</a></li>
    <li><a href="#control-system-design">Control System Design</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#drivetrain-design">Drivetrain Design</a></li>
    <li><a href="#control-scheme-design">Control Scheme Design</a></li>
    <li><a href="#motor-control-design">Motor control design</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#gait-control-design">Gait Control Design</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a>
      <ul>
        <li></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>It is <strong>National second prize</strong> winning works of <em>the 10th National College Students Mechanical Innovation Design Competition</em>.The funny thing is, it all started with an idea I had in the shower&hellip;&hellip;</p>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/WBnvCC7nAq4" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<hr>
<h2 id="prologue">Prologue</h2>
<figure><img src="/images/Ostrich/5Ostrich.jpg"/><figcaption>
            <h4>African ostriches</h4>
        </figcaption>
</figure>

<p>As the fastest running biped in the world, the ostrich has strong and powerful legs and can achieve continuous high-speed movement. This superiority provides an important reference value for the mechanical structure design of biped robots. Taking the ostrich leg as the bionic prototype, I designed a wheel-legged ostrich-like robot according to the principles of engineering bionics, and carried out relevant theoretical analysis and simulation experiment research.</p>
<figure><img src="/images/Ostrich/ostrichrun.jpg"/><figcaption>
            <h4>Running ostrich</h4>
        </figcaption>
</figure>

<p>In the process of designing an ostrich robot, I went through such steps：First of all, combined with the literature research method to study the biological mechanism, biological movement mechanism and movement law of ostriches, and summarize the reasons that make ostriches achieve <strong>continuous high-speed and stable running</strong>. Using bionic mechanical design and lightweight design, a wheel-legged ostrich-like robot with compact structure, simple control, high-speed running, energy saving and shock absorption is designed, and a 3D model is established through <strong>SOLIDWORKS</strong>. Secondly, the leg structure of the robot is simplified, and the forward kinematics mathematical model is established by vector analysis method, and the trajectory of the foot and the velocity and acceleration equations of each joint are obtained, and the correctness of the model is verified by <strong>ADAMS simulation</strong>. At the same time, the forward and inverse kinematics analysis of the leg mechanism of the robot is carried out, and its correctness is verified. Finally, based on <strong>D&rsquo;Alembert&rsquo;s principle</strong>, the dynamic analysis of the leg structure of the robot is carried out, a <strong>kinetostatics model</strong> is established, and the constraint reaction force of each joint and the driving torque required by the crank are solved, and the correctness of the dynamic model is verified by <strong>ADAMS simulation</strong>.</p>
<hr>
<h2 id="design-background">Design Background</h2>
<p>At present, the most bionic biped robots are humanoid biped robots. But the ostrich is one of the most <strong>efficient</strong> and <strong>durable</strong> large bipeds in existence. Ostrich legs have strong and powerful muscles, and under the interaction of leg bones-muscles-tendons, it has the characteristics of fast running speed, strong obstacle avoidance ability, stable and durable movement. The step length of each step of an ostrich during running can reach <strong>3.5-7m</strong>, and it can run continuously at a speed of <strong>50-60km/h</strong> for more than <strong>30 minutes</strong>, and the fastest running speed can reach <strong>70km/h</strong>. Compared with humans, the fastest running speed of ostriches is twice that of humans, and when the speed of movement exceeds <strong>2km/h</strong>, the energy utilization efficiency of ostriches is about <strong>1.5 times</strong> that of humans. Therefore, the ostrich provides important reference value in the research and bioinspired design of bioinspired biped robots with high energy efficiency and high speed.</p>
<figure><img src="/images/Ostrich/Ostriches-spread1.jpg"/>
</figure>

<hr>
<h2 id="robot-design">Robot Design</h2>
<h4 id="robot-design-metrics">Robot Design Metrics</h4>
<p>The device should realize the basic function of bionic ostrich running. Mechanically capable of running fast. Remote control is possible on the control. And it is necessary to ensure that the device will not fall when it is running.</p>
<h4 id="structural-design">Structural Design</h4>
<h6 id="analysis-of-biological-characteristics-of-ostrich-legs">Analysis of biological characteristics of ostrich legs</h6>
<p>The ostrich is the largest and heaviest biped animal in the world. It can run continuously for 30 minutes at an average speed of 50-60km/h. It is the fastest stable runner in the world, and its fastest running speed can reach 80km /h. According to the ostrich leg skeletal muscle model established by John R. Hutchinson et al., as shown in the figure, from top to bottom, the ostrich leg bones include <strong>femur, tibia, tarsal metatarsal, three phalanges and toenails</strong>, and the main joints include the <strong>hip joint , knee joint, ankle joint and metatarsophalangeal joint</strong>, the red line in the figure indicates the muscle-tendon structure of the ostrich leg. It can be seen from the figure that the ostrich legs have many <strong>double-joint or three-joint muscles connecting the knees</strong>, metatarsophalangeal joints, interphalangeal joints and toes, which can produce a <strong>high rigid-flexible coupling effect</strong> on the distal limbs of the ostrich, thereby coordinating the ostrich to complete Distal limb movement. In contrast, the hip joints of the ostrich legs are muscular, which mainly provide stability during the movement of the ostrich, and the joints directly used to adjust the posture of the ostrich limbs are the knee joints of the ostrich. The function of the ostrich knee joint is similar to that of the human hip joint, which can adjust the movement of the ostrich within a large range of motion.</p>
<figure><img src="/images/Ostrich/muscle.png"/><figcaption>
            <h4>Illustration of ostrich leg skeletal muscle model</h4>
        </figcaption>
</figure>

<p>Therefore, the leg muscles of ostriches are mainly concentrated near the hip joints of ostriches, while the tibia and tarsal metatarsal bones are relatively light in mass, and are mainly driven by tendons or ligaments to generate movement, thereby reducing the mass of the distal end of the ostrich legs and reducing the rotation inertia. This facilitates the <strong>energy-efficient</strong> movement of the ostrich.</p>
<p>In order to enhance the output force of the muscles at the ostrich hip joint to the distal end of the leg, the rigid-flexible coupling leg of the ostrich combines the <strong>principle of leverage</strong>, so that the muscles and tendons are connected with the protruding part of the tibia at the knee joint of the ostrich and the contact of the tarsal metatarsal bone at the ankle joint. The protruding parts are connected to increase the acting moment by changing the effective limb length, and drive the ostrich legs to swing. The working principle is shown in figure below.</p>
<figure><img src="/images/Ostrich/linefig.png"/><figcaption>
            <h4>The principle of ostrich leg movement</h4>
        </figcaption>
</figure>

<p>In addition, the tendon acts as a buffer to delay when the muscle is exerted quickly and forcefully, thus effectively protecting the muscle from injury. The leg structure of the ostrich has well-developed tendon tissue. Through the <strong>rigid-flexible coupling</strong> characteristics of the tendon and the bone, the toe of the ostrich can partially convert the huge reaction force generated by the ground on its leg into the force of the bone before the toe touches the ground. The other part converts the impact energy into elastic potential energy and stores it by converting it into the tension of the tendon, and releases this energy at the end of the ground contact, thereby improving the movement efficiency of the ostrich. There is a passive rebound phenomenon in the joint between the ostrich tarsus and the tibia (ankle joint), which can be divided into three stages: first, the tibia is fixed, and then the joint angle between the tibia and the tarsus is changed by manipulating the tarsus; When the joint angle between the two bones is greater than 125°, the tarsus metatarsals will passively move to the maximum joint angle; when the joint angle between the two bones is less than 105°, the tarsus metatarsals will passively move to the minimum joint angle; when the joint angle between the two bones At the transition stage of 105°-125°, the passive rebound effect of this joint is not obvious, but when the joint angle between the two bones is 115°, the passive rebound phenomenon disappears, and the whole leg is in a balanced state. This passive rebound phenomenon can help the ostrich save energy consumption during exercise.</p>
<p>During the movement of an ostrich, when its toes are about to end touching the ground, under the action of tendons, the force at the toenails will change suddenly, causing the reaction force between it and the ground to suddenly increase, resulting in a &ldquo;kicking force&rdquo;. , to help the ostrich increase the speed of movement. In addition, the metatarsophalangeal joint of the ostrich is always off the ground, and there are tendons and ligaments in the metatarsophalangeal joint. By <strong>storing and releasing energy</strong>, it can buffer the impact of the ostrich when it moves at high speed, and can also save energy consumption.</p>
<p>Among the ostrich leg bones, the femur near the trunk is short and thick, while the tibia and tarsus are relatively slender. According to the research of Nina U. Schaller, the average length of each bone in the ostrich leg and the total leg length are shown in table below, where the total leg length is equal to the sum of the lengths of all bones. It can be seen from this that <strong>the ratio of the lengths of the bones of the ostrich</strong> is:</p>
<p>$$ {14.70}:{30.65}:{30.65}:{34.95}:{34.95}:{19.70} $$</p>
<table>
<thead>
<tr>
<th style="text-align:center">femur length</th>
<th style="text-align:center">tibial length</th>
<th style="text-align:center">tarsal metatarsal length</th>
<th style="text-align:center">third toe length</th>
<th style="text-align:center">third toe length</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">301.7</td>
<td style="text-align:center">535.5</td>
<td style="text-align:center">469.3</td>
<td style="text-align:center">225.1</td>
<td style="text-align:center">1531.4</td>
</tr>
</tbody>
</table>
<h6 id="configuration-selection">Configuration selection</h6>
<p>The main body of the leg of this device adopts a planar parallel five-bar mechanism, as shown in figure below, which consists of a main body and two bar groups. It imitates the morphological characteristics of ostrich legs in nature, and is a two-leg planar parallel mechanism. Compared with the series mechanism, the parallel mechanism has the characteristics of compact structure, high rigidity, and strong bearing capacity, which enables the robot to overcome obstacles more flexibly and move faster.</p>
<p><figure><img src="/images/Ostrich/IMG_9439.PNG"/>
</figure>

<figure><img src="/images/Ostrich/5gan.png"/><figcaption>
            <h4>planar parallel five-bar mechanism</h4>
        </figcaption>
</figure>
</p>
<p>Each rotary joint of the main structure of the leg of the robot has two translation degrees of freedom along the transverse direction and the longitudinal direction respectively. Assuming that the robot moves in the x direction, it can be assumed to be symmetrical in the y (horizontal) direction. At the same time, the weight of the robot is mainly concentrated on the main structure and wheels.</p>
<p>The terminal structure of the device can be divided into two states of wheel type and step type, which can be transformed into each other through <strong>a special metamorphic mechanism</strong> during operation.</p>
<div class="bilibili"><iframe src="//player.bilibili.com/player.html?bvid=BV1D8411U72J&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe></div>

<p>As shown in the figure below, the wheel rolls around the a-axis, thereby relying on the friction between the wheel and the ground to realize the forward and backward movement of the device as a whole.</p>
<p>As shown in the figure below, this device relies on the free rotation of the two hinge nodes at B and C to make the BC rod rotate rigidly. Adjust the angle between the BC rod and the ground by controlling the rotation degree at the two points B and C. The end prosthetic foot component and the BC rod are connected in a hinged manner. Due to its gravity, the connection line at the lowest point of the front and back palms is always parallel to the ground, which can be <strong>adaptively grounded</strong>.</p>
<p><figure><img src="/images/Ostrich/wheelmode.png"/>
</figure>

<figure><img src="/images/Ostrich/IMG_9541.jpeg"/><figcaption>
            <h4>Wheel structure diagram</h4>
        </figcaption>
</figure>
</p>
<p>It should be noted that when standing, the BC rod is completely vertical, that is, the dead point of the connecting rod is on the same line, and the steering gear can <strong>stand firmly without outputting torque</strong>, which saves energy consumption.</p>
<p>As shown in the figure below, the BC rod continues to rotate counterclockwise until the foot member is completely off the ground and the wheel structure touches the ground, and then continues to rotate to nearly 90° with the ground. Because the mass of the forefoot in the foot component is greater than that of the backfoot, the center of gravity of the component is biased towards the forefoot. At this time, due to the effect of gravity, the foot member rotates clockwise around the hinge point C. And because of the clockwise rotation of the foot member, the BC bar continues to rotate counterclockwise, and the two form a positive feedback. And hinge B top has special device to hinder BC bar from continuing to rotate. When the BC bar rotates to this place, the structure is locked, and the foot is received by the top of the wheel and folded, thereby realizing the conversion of the wheel and foot. And the forefoot overlaps with the BC rod, which can prevent the contact between the foot and the ground from affecting the movement of the wheel.</p>
<p><figure><img src="/images/Ostrich/legmode.png"/>
</figure>

<figure><img src="/images/Ostrich/IMG_9542.jpeg"/><figcaption>
            <h4>Leg structure diagram</h4>
        </figcaption>
</figure>
</p>
<figure><img src="/images/Ostrich/IMG_9540.PNG"/><figcaption>
            <h4>Overall picture of the robot</h4>
        </figcaption>
</figure>

<h4 id="mechanical-model-analysis">Mechanical Model Analysis</h4>
<p>For the main structure of the legs, a simplified mathematical model of the closed-chain five-bar mechanism is established and placed on a plane Cartesian coordinate system, as shown in the left figure. The lengths of OA, CD, AB, BC, OD, and BE are $L_1$, $L_2$, $L_3$, $L_4$, $L_5$, and $L_6$, respectively. $O$ and $D$ points are driving. The overall structure can be regarded as an inverted pendulum structure, as shown in the right figure
<figure><img src="/images/Ostrich/mathmodel.png"/><figcaption>
            <h4>Simplified mathematical model schematic</h4>
        </figcaption>
</figure>
</p>
<h6 id="static-analysis">Static analysis</h6>
<ol>
<li>Closed chain five-bar mechanism</li>
</ol>
<p><strong>Forward kinematics solution：</strong></p>
<p>We can know from the figure
$$ \begin{aligned}
\overrightarrow{O A}=\left(L_1 \cos \alpha, L_1 \sin \alpha\right)=\left(x_a, y_a\right)
\end{aligned} $$</p>
<p>$$ \begin{aligned}
\overrightarrow { OD }=\left(\begin{array}{ll}
L 5,0
\end{array}\right)
\end{aligned} $$</p>
<p>$$ \begin{aligned}
\overrightarrow{D C}=\left(L_2 \cos \beta, L_2 \sin \beta\right)
\end{aligned} $$</p>
<p>Due to
$$ \begin{aligned}
\overrightarrow{O C}=\overrightarrow{O D}+\overrightarrow{D C}
\end{aligned} $$</p>
<p>So that
$$ \begin{aligned}
\overrightarrow{O C}=\left(L_5+L_2 \cos \beta, L_2 \sin \beta\right)=\left(x_c, y_c\right)
\end{aligned} $$</p>
<p>Due to
$$ \begin{aligned}
\overrightarrow{A C}=\overrightarrow{O C}-\overrightarrow{O A}
\end{aligned} $$</p>
<p>So that
$$ \begin{aligned}
|\overrightarrow{A C}|=\sqrt{\left(x_c-x_a\right)^2+\left(y_c-y_a\right)^2}
\end{aligned} $$</p>
<p>From the law of cosines
$$ \begin{aligned}
\cos (\theta+\varphi)=\frac{\mathrm{L}_3{ }^2+|\overrightarrow{A C}|^2-L_4{ }^2}{2 L_3|\overrightarrow{A C}|}
\end{aligned} $$</p>
<p>So that
$$ \begin{aligned}
\cos \theta \cos \varphi-\sin \theta \sin \varphi=\frac{L_3^2+|\overrightarrow{A C}|^2-L_4^2}{2 L_3|\overrightarrow{A C}|}
\end{aligned} $$</p>
<p>Given that
$$ \begin{aligned}
\cos \varphi=\frac{x_c-x_a}{|\overrightarrow{A C}|}
\end{aligned} $$</p>
<p>$$ \begin{aligned}
\sin \varphi=-\frac{y_c-y_a}{|\overrightarrow{A C}|}
\end{aligned} $$</p>
<p>So
$$ \begin{aligned}
2 L_3\left(x_c-x_a\right) \cos \varphi+2 L_3\left(y_c-y_a\right) \sin \varphi=L_3^2+|\overrightarrow{A C}|^2-L_4^2
\end{aligned} $$</p>
<p>Let
$$ \begin{aligned}
A=2 L_3\left(x_c-x_a\right)
\end{aligned}$$</p>
<p>$$ \begin{aligned}
B=2 L_3\left(y_c-y_a\right)
\end{aligned} $$</p>
<p>$$ \begin{aligned}
C=L_3^2+|\overrightarrow{A C}|^2-L_4^2
\end{aligned} $$</p>
<p>So that
$$ \begin{aligned}
A \cos \varphi+B \sin \varphi=C
\end{aligned} $$</p>
<p>Universal formula from trigonometric functions
$$ \begin{aligned}
\frac{A\left(1-\tan ^2 \frac{\theta}{2}\right)}{1+\tan ^2 \frac{\theta}{2}}+\frac{2 B \tan \frac{\theta}{2}}{1+\tan ^2 \frac{\theta}{2}}=C
\end{aligned} $$</p>
<p>Solve the equation to get
$$ \begin{aligned}
\theta=2 \arctan \left(\frac{B \pm \sqrt{A^2+B^2-C^2}}{A+C}\right)
\end{aligned} $$</p>
<p>Given that
$$ \begin{aligned}
\overrightarrow{A E}=\left(\left(L_3+L_6\right) \cos \theta\left(L_3+L_6\right) \sin \theta\right)
\end{aligned} $$</p>
<p>$$ \begin{aligned}
\overrightarrow{OE}=\overrightarrow{OA}+\overrightarrow{AE}
\end{aligned} $$</p>
<p>We can know that
$$ \begin{aligned}
\overrightarrow{O E}=(x, y)=\left(x_a+\left(L_3+L_6\right) \cos \theta, y_a+\left(L_3+L_6\right) \sin \theta\right)
\end{aligned} $$</p>
<p><strong>Inverse kinematics solution:</strong></p>
<p>We can know from the figure
$$ \begin{aligned}
\overrightarrow{O A}=\left(L_1 \cos \alpha, L_1 \sin \alpha\right)
\end{aligned} $$</p>
<p>$$ \begin{aligned}
\overrightarrow{O E}=(x, y)
\end{aligned} $$</p>
<p>$$ \begin{aligned}
\overrightarrow{A E}=\left(\left(L_3+L_6\right) \cos \theta\left(L_3+L_6\right) \sin \theta\right)
\end{aligned} $$</p>
<p>Given that
$$ \begin{aligned}
\overrightarrow{O E}=\overrightarrow{O A}+\overrightarrow{A E}
\end{aligned} $$</p>
<p>So that
$$ \begin{aligned}
\overrightarrow{O E}=(x \quad y)=\left(L_1 \cos \alpha+\left(L_3+L_6\right) \cos \theta L_1 \sin \alpha+\left(L_3+L_6\right) \sin \theta\right)
\end{aligned} $$</p>
<p>Simplify to get
$$ \begin{aligned}
&amp; 2 x L_1 \cos \alpha+2 y L_1 \sin \alpha=x^2+y^2+L_1^2-\left(L_3+L_6\right)^2
\end{aligned} $$</p>
<p>Let
$$ \begin{aligned}
&amp; \mathrm{a}=2 \mathrm{xL}_1
\end{aligned} $$</p>
<p>$$ \begin{aligned}
&amp; \mathrm{~b}=2 \mathrm{yL}_1
\end{aligned} $$</p>
<p>$$ \begin{aligned}
&amp; c=x^2+y^2+L_1{ }^2-\left(L_3+L_6\right)^2
\end{aligned} $$</p>
<p>So
$$ \begin{aligned}
&amp; a \cos \alpha+b \sin \alpha=c
\end{aligned} $$</p>
<p>Solve the equation to get
$$ \begin{aligned}
&amp; \alpha=2 \arctan \left(\frac{b \pm \sqrt{a^2+b^2-c^2}}{a+c}\right)
\end{aligned} $$</p>
<p>Brought into the formula
$$ \begin{aligned}
&amp; \overrightarrow{O E}=(x ,y)=\left(L_1 \cos \alpha+\left(L_3+L_6\right) \cos \theta L_7 \sin \alpha+\left(L_3+L_6\right) \sin \theta\right)
\end{aligned} $$</p>
<p>Solve the equation to get
$$ \begin{aligned}
&amp; \cos \theta=\frac{x-L_1 \cos \alpha}{L_3+L_6}
\end{aligned} $$</p>
<p>$$ \begin{aligned}
&amp; \sin \theta=\frac{y-L_1 \sin \alpha}{L_3+L_6}
\end{aligned} $$</p>
<p>So
$$ \begin{aligned}
&amp; \overrightarrow{B E}=\left(L_6 \cos \theta, L_6 \sin \theta\right)
\end{aligned} $$</p>
<p>Given that
$$ \begin{aligned}
&amp; \overrightarrow{OB}=\overrightarrow{OE}+\overrightarrow{E B}
\end{aligned} $$</p>
<p>We can know
$$ \begin{aligned}
\overrightarrow{OB}=(\mathrm{x}-\mathrm{L}_6 \cos \theta, \mathrm{y}-\mathrm{L}_6 \sin \theta)=(\mathrm{x}_b, \mathrm{y}_b)
\end{aligned} $$</p>
<p>Given that
$$ \begin{aligned}
&amp; \overrightarrow{O C}=\left(L_5 +L_2\cos \beta, L_2 \sin \beta\right)
\end{aligned} $$</p>
<p>$$ \begin{aligned}
&amp; \overrightarrow{C B}=\left(-L_4 \cos \gamma, L_4 \sin \gamma\right)
\end{aligned} $$</p>
<p>$$ \begin{aligned}
&amp; \overrightarrow{O B}=\overrightarrow{O C}+\overrightarrow{C B}
\end{aligned} $$</p>
<p>We can know that
$$\begin{aligned}
&amp; \mathrm{x}_{\mathrm{b}}=\mathrm{L}_5+\mathrm{L}_2 \cos \beta-\mathrm{L}_4 \cos \gamma
\end{aligned}$$</p>
<p>$$\begin{aligned}
&amp; \mathrm{y}_{\mathrm{b}}=\mathrm{L}_2 \sin \beta+\mathrm{L}_4 \sin \gamma
\end{aligned}$$</p>
<p>Eliminate $\gamma$ to get
$$\begin{aligned}
2 L_2\left(x_b-L_5\right) \cos \beta+2 L_2 y_b \sin \beta=\left(x_b-L_5\right)^2+L_2{ }^2+y_b{ }^2-L_4{ }^2
\end{aligned}$$</p>
<p>Let
$$\begin{aligned}
d=2 L_2\left(x_b-L_5\right)
\end{aligned}$$</p>
<p>$$\begin{aligned}
e=2 L_2 y_b
\end{aligned}$$</p>
<p>$$\begin{aligned}
f=\left(x_b-L_5\right)^2+L_2{ }^2+y_b{ }^2-L_4{ }^2
\end{aligned}$$</p>
<p>So that
$$\begin{aligned}
d \cos \beta+e \sin \beta=f
\end{aligned}$$</p>
<p>Solve the equation to get
$$\begin{aligned}
\beta=2 \arctan \left(\frac{e \pm \sqrt{d^2+e^2-f^2}}{d+f}\right)
\end{aligned}$$</p>
<p>In summary
$$\begin{aligned}
\alpha=2 \arctan \left(\frac{b \pm \sqrt{a^2+b^2-c^2}}{a+c}\right)
\end{aligned}$$</p>
<p>$$\begin{aligned}
\beta=2 \arctan \left(\frac{\left.e \pm \sqrt{d^2+e^2-f^2}\right)}{d+f}\right)
\end{aligned}$$</p>
<p>Therefore, the constraint reaction force of the force acting at E (set as F) on the robot leg end (O and D) can be expressed as</p>
<p>$$\begin{aligned}
M_O=\left(\left(\mathrm{L}_3+\mathrm{L}_6\right) \cos \theta+\mathrm{L}_1 \cos \alpha\right) F
\end{aligned}$$</p>
<p>$$\begin{aligned}
M_D=\left(\left(\mathrm{L}_3+\mathrm{L}_6\right) \cos \theta+\mathrm{L}_1 \cos \alpha-\mathrm{L}_5\right) F
\end{aligned}$$</p>
<ol start="2">
<li>Inverted pendulum mechanism</li>
</ol>
<p>Consider a <strong>three-dimensional linear inverted pendulum model</strong> moving in three-dimensional Cartesian space, which rotates around point $O$, and the center of mass can move within a virtual constrained planar motion. The plane where $xy$ is located is the horizontal ground, the z-axis is vertical upwards, and is perpendicular to the ground, and we specify the positive direction of $x$ as the forward direction of the robot.</p>
<p>The constraint plane can be expressed using the normal vector of the plane as</p>
<p>$$\begin{aligned}
\left(k_x, k_y-1\right)
\end{aligned}$$</p>
<p>and the intersection of the z-axis with this plane is $Z_c$. Then for the constraint plane:
$$\begin{aligned}
z=k_x x+k_y y+z_c
\end{aligned}$$</p>
<p>If the constraint plane is horizontal, then one has
$$\begin{aligned}
k_x=k_y=0
\end{aligned}$$</p>
<p>Even for the slope walking process where the constraint plane is not horizontal, we can add additional constraints to the torque to make the dynamic process hold:
$$\begin{aligned}
\tau_x x+\tau_y y=0
\end{aligned}$$</p>
<p>For the case where the constraint plane is horizontal, the zero moment point (ZMP) is calculated as
$$\begin{aligned}
p_x=-\frac{\tau_y}{m g}
\end{aligned}$$</p>
<p>$$\begin{aligned}
p_y=\frac{\tau_x}{m g}
\end{aligned}$$</p>
<h6 id="kinematic-analysis">Kinematic analysis</h6>
<p>The robot is composed of a main body and two legs with driving wheels as the ends. It imitates the morphological characteristics of ostrich legs in nature, and is a two-leg planar parallel mechanism. Compared with the series mechanism, the parallel mechanism has the characteristics of compact structure, high rigidity, and strong bearing capacity. As a result, the robot can run faster while overcoming obstacles with greater agility. At the same time, the device has two states of wheel type and step type, which can be transformed into each other during operation.</p>
<p>The robot is composed of a main body and two legs with driving wheels as the ends. It imitates the morphological characteristics of ostrich legs in nature, and is a two-leg planar parallel mechanism. Compared with the series mechanism, each rotary joint on the parallel robot leg has two translation degrees of freedom along the transverse direction and the longitudinal direction respectively. When the robot is running along the $x$ direction, it can be assumed to be symmetric in the $y$ (lateral) direction. At the same time, the weight of the robot is mainly concentrated on the main structure and wheels.
Therefore, the robot can be approximated as an <strong>inverted pendulum</strong> on an industrial computer (IPC), and its dynamic equation is</p>
<p>$$
\begin{aligned}
(\mathrm{M}+\mathrm{m}) \ddot{\mathrm{x}}+\mathrm{ml} \cos (\theta) \ddot{\theta}-\mathrm{ml} \sin (\theta) \dot{\theta}^2=\mathrm{u}
\end{aligned}$$</p>
<p>$$\begin{aligned}
\mathrm{ml} \cos \ddot{\mathrm{x}}+\mathrm{ml}^2 \ddot{\theta}-\mathrm{mgl} \sin (\theta)=0
\end{aligned}$$</p>
<p>Among them, $M$ and $m$ are the point mass concentrated at the tip of the pole and the mass of the trolley, which correspond to the main structure of the robot and the wheel; $l$ is the length of the pendulum, that is, the height of the robot; $θ$ is the pitch angle; displacement in the $x$ direction; $u$ is the force acting on the cart. According to the structural characteristics, it is easy to obtain the relationship between $u$ and the torque applied to the wheel.</p>
<p>In this robot structure, since the height of the main structure of the robot changes during operation, the length of the pendulum, that is, the height of the robot, is variable.</p>
<p>In addition, because the dynamic characteristics of the robot in the ground contact stage have a great influence on the overall performance of the robot during the running process of the robot, it is necessary to conduct additional analysis on the dynamic characteristics of the robot in the ground contact stage.</p>
<p>Let the mass of the upper rod be $m_1$, and the mass of the lower rod be $m_2$, and they are both represented by the point mass at the end of the leg.
Then, the kinetic energy of the system</p>
<p>$$\begin{aligned}
K=K_1+K_2
\end{aligned}$$</p>
<p>where $K$ is the total kinetic energy of the system, $K_1$ is the total kinetic energy of the upper leg, and $K_2$ is the total kinetic energy of the lower leg.</p>
<p>$$\begin{aligned}
K_1=\frac{1}{2}\left(2 \mathrm{~m}_1+2 \mathrm{~m}_2\right) \mathrm{L}_3{ }^2 \dot{\theta}^2+\frac{1}{2}\left(2 \mathrm{~m}_1+2 \mathrm{~m}_2\right) \mathrm{L}_4{ }^2 \dot{\gamma}^2
\end{aligned}$$</p>
<p>$$\begin{aligned}
K_2=\mathrm{m}_2 \mathrm{~L}_2{ }^2(\pi-\beta)^2+\mathrm{m}_2 \mathrm{~L}_1{ }^2 \dot{\alpha}^2
\end{aligned}$$</p>
<p>Therefore, the total kinetic energy of the system can be obtained</p>
<p>$$\begin{aligned}
K=\frac{1}{2}\left(2 \mathrm{~m}_1+2 \mathrm{~m}_2\right) \mathrm{L}_3{ }^2 \dot{\theta}^2+\frac{1}{2}\left(2 \mathrm{~m}_1+2 \mathrm{~m}_2\right) \mathrm{L}_4{ }^2 \dot{\gamma}^2+K_2=\mathrm{m}_2 \mathrm{~L}_2{ }^2(\pi-\beta)^2+\mathrm{m}_2 \mathrm{~L}_1{ }^2 \dot{\alpha}^2
\end{aligned}$$</p>
<p>Potential energy of the system</p>
<p>$$\begin{aligned}
E=E_1+E_2
\end{aligned}$$</p>
<p>where $E$ is the total potential energy of the system, $E_1$ is the total potential energy of the upper leg, and $E_2$ is the total potential energy of the lower leg.</p>
<p>$$\begin{aligned}
E_1=g\left(\mathrm{~m}_1+\mathrm{m}_2\right)\left(\mathrm{L}_3 \sin \theta+\mathrm{L}_4 \sin \gamma\right)
\end{aligned}$$</p>
<p>$$\begin{aligned}
E_2=\mathrm{m}_2 g\left(\mathrm{~L}_1 \sin \alpha+\mathrm{L}_2 \sin (\pi-\beta)\right)
\end{aligned}$$</p>
<p>Therefore, the total potential energy of the system can be obtained as</p>
<p>$$\begin{aligned}
E=g\left(\mathrm{~m}_1+\mathrm{m}_2\right)\left(\mathrm{L}_3 \sin \theta+\mathrm{L}_4 \sin \gamma\right)+\mathrm{m}_2 g\left(\mathrm{~L}_1 \sin \alpha+\mathrm{L}_2 \sin (\pi-\beta)\right)
\end{aligned}$$</p>
<h6 id="gait-design">Gait design</h6>
<p>Gait is a periodic phenomenon that describes the walking characteristics of animals. It is introduced here to describe the periodic phenomenon during the movement of the robot. Phase difference refers to the difference between the movement lead or lag between different legs. The description of gait mostly uses <strong>gait sequence diagram</strong>.</p>
<figure><img src="/images/Ostrich/step.png"/><figcaption>
            <h4>Timing diagram of walking and trotting</h4>
        </figcaption>
</figure>

<p>The first half cycle of the robot executes the support phase and the swing phase of the first half cycle according to the program, and adjusts the gait by recognizing the time increase on the basis of the set step frequency adjustment, and makes a state switch. In the same way in the second half cycle, the gait control of the robot can be realized.</p>
<hr>
<h2 id="simulation-analysis">Simulation Analysis</h2>
<h4 id="kinematic-analysis-1">Kinematic Analysis</h4>
<p>Based on the mechanical model established above for the robot leg mechanism, we perform dynamic simulation through ADAMS software, and draw the simulation results in the ADAMS post-processing module. The displacement and velocity simulation analysis is obtained. It can be seen from the figure that the robot&rsquo;s running trajectory and running speed are relatively stable.</p>
<figure><img src="/images/Ostrich/trajectory1.png"/>
</figure>

<figure><img src="/images/Ostrich/trajectory2.png"/><figcaption>
            <h4>Simulation diagram of centroid displacement</h4>
        </figcaption>
</figure>

<figure><img src="/images/Ostrich/velocity1.png"/>
</figure>

<figure><img src="/images/Ostrich/velocity2.png"/><figcaption>
            <h4>Center of mass velocity simulation diagram</h4>
        </figcaption>
</figure>

<h4 id="stress-analysis">Stress Analysis</h4>
<p>For the follow-up finite element analysis, based on the mechanical model established above for the robot leg mechanism, we perform dynamic simulation through ADAMS software, and draw the simulation results in the ADAMS post-processing module. The force of several dangerous places was obtained</p>
<p><figure><img src="/images/Ostrich/adams.png"/>
</figure>

<figure><img src="/images/Ostrich/stress1.png"/>
</figure>

<figure><img src="/images/Ostrich/stress2.png"/>
</figure>

<figure><img src="/images/Ostrich/stress3.png"/><figcaption>
            <h4>Three directions of force in xyz direction at the hinge of the main body and the leg structure</h4>
        </figcaption>
</figure>
</p>
<p><figure><img src="/images/Ostrich/adams2.png"/>
</figure>

<figure><img src="/images/Ostrich/stress4.png"/>
</figure>

<figure><img src="/images/Ostrich/stress5.png"/><figcaption>
            <h4>The force in the xy direction of the hinge of the leg and foot structure</h4>
        </figcaption>
</figure>
</p>
<hr>
<h2 id="material-and-process-selection">Material and Process Selection</h2>
<h4 id="material-selection">Material Selection</h4>
<p>We initially selected the material as carbon fiber plate, and manufactured the parts through CNC process.</p>
<p>For general materials, the higher the specific strength, the better the performance under a given load. Metal materials such as aluminum are prone to problems such as deformation and dents under high loads, but carbon fiber composite materials are stronger under high loads because of their high specific stiffness and specific strength. Not only the performance advantages are obvious, but the highlight of carbon fiber composites is &ldquo;lightness&rdquo;, its density is only a little more than 1/2 of that of aluminum, which can provide more design space for power sources such as batteries. Longer battery life.</p>
<p>In addition, from an economic point of view, it seems that carbon fiber raw materials are much more expensive than aluminum alloys, but in specific applications, from raw materials to molding, the processing cost accounts for a larger proportion of the cost. However, through the efforts of many materialists, the price gap between carbon fiber manipulators and traditional aluminum alloy manipulators has been narrowed. At present, the price difference between the two is almost reduced to almost the same.</p>
<figure><img src="/images/Ostrich/IMG_9546.JPG"/>
</figure>

<figure><img src="/images/Ostrich/IMG_9547.JPG"/><figcaption>
            <h4>Robot assembled from carbon fiber parts</h4>
        </figcaption>
</figure>

<h2 id="strength-check">Strength Check</h2>
<p>When the device is in the no-load state, the stress on each part is determined by the weight of the device itself, so the check of the dangerous rod focuses on the stress in the moving state. A dangerous condition is considered reached when the two rods that make up the main structure of the leg are folded close to horizontal. Now select two main rods composed of dangerous rods to make up the leg structure for finite element strength check. After adding loads as described above and performing adams simulation to obtain the force of each joint, use the Simulation module of <strong>SOLIDWORKS</strong> to perform finite element analysis, as shown in the figure below.</p>
<figure><img src="/images/Ostrich/sim1.png"/><figcaption>
            <h4>Finite element analysis of main rod 1</h4>
        </figcaption>
</figure>

<p>The calculated maximum stress is 11.46MPa. Carbon fiber is selected as the processing material, and the allowable stress meets the strength requirements by consulting the manual.</p>
<figure><img src="/images/Ostrich/sim2.png"/><figcaption>
            <h4>Finite element analysis of main rod 2</h4>
        </figcaption>
</figure>

<p>The calculated maximum stress is 0.6377MPa. Carbon fiber is selected as the processing material, and the allowable stress meets the strength requirements by consulting the manual.</p>
<h2 id="control-system-design">Control System Design</h2>
<h4 id="motor-parameter-calculation-and-selection">Motor Parameter Calculation and Selection</h4>
<p>Referring to the design of the bionic ostrich leg, after calculation, the motor voltage is 10v and the torque is 10N. After comparison, the motor is determined to be a brushless motor <strong>AS5048 encoder DC pod code disc micro-single motor zoom pan-tilt machine</strong>.</p>
<figure><img src="/images/Ostrich/motor.png"/><figcaption>
            <h4>Brushless motor AS5048 encoder DC pod code disc micro-single motor zoom pan-tilt machine</h4>
        </figcaption>
</figure>

<table>
<thead>
<tr>
<th style="text-align:center">parameter</th>
<th style="text-align:center">unit</th>
<th style="text-align:center">3510（magnetic ring）</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Rated Voltage</td>
<td style="text-align:center">V</td>
<td style="text-align:center">12</td>
</tr>
<tr>
<td style="text-align:center">Rated Current</td>
<td style="text-align:center">A</td>
<td style="text-align:center">0.53</td>
</tr>
<tr>
<td style="text-align:center">Rated Torque</td>
<td style="text-align:center">N*M</td>
<td style="text-align:center">0.11</td>
</tr>
<tr>
<td style="text-align:center">Rated Rotational Speed</td>
<td style="text-align:center">rpm</td>
<td style="text-align:center">945</td>
</tr>
<tr>
<td style="text-align:center">Maximum Rotational Speed</td>
<td style="text-align:center">rpm</td>
<td style="text-align:center">1250</td>
</tr>
</tbody>
</table>
<h4 id="servo-parameter-calculation-and-selection">Servo Parameter Calculation and Selection</h4>
<p>After the force analysis according to the overall mechanical structure after 3D modeling, it is determined to add suitable materials and optimize the shape and size of the structural parts, and finally the weight of the entire mechanism is about AKG. Referring to the design of the legs of the bionic ostrich, it was determined that the servo was <strong>SPT5410HV-180/10kg high-voltage and high-speed digital servo</strong>.</p>
<h2 id="drivetrain-design">Drivetrain Design</h2>
<p>This device connects the motor to the calf construction and wheel-foot conversion on both sides, and connects the main components of the legs and feet in the form of multi-section levers, so as to drive the device to move back and forth as a whole. On the one hand, the motor at the calf drives the regular back and forth movement of the foot members on both sides, coupled with the adaptability of the foot components to the ground, and then drives the overall movement of the device. On the other hand, the motor at the wheel-foot conversion unit realizes the wheel-foot conversion by controlling the rotation degree of the hinge to rotate the wheel-foot adapter to the desired angle.</p>
<p>We directly bite the brushless motor and hub to form a direct drive structure. Higher precision and greater pressure resistance.</p>
<figure><img src="/images/Ostrich/IMG_9433.PNG"/><figcaption>
            <h4>Drivetrain assembly drawing</h4>
        </figcaption>
</figure>

<h2 id="control-scheme-design">Control Scheme Design</h2>
<p>The control scheme of this device provides the offset angle for MPU6050, the servo realizes PWM control, and under the joint action of remote control, FOC drive board and magnetic encoder, it provides the control scheme of the whole device, and the whole control scheme is designed as follows:</p>
<figure><img src="/images/Ostrich/controlfig.png"/><figcaption>
            <h4>Control system diagram</h4>
        </figcaption>
</figure>

<h2 id="motor-control-design">Motor control design</h2>
<h4 id="pcb-design">PCB Design</h4>
<p>The motor control drive system used in this device uses Esp32 as the main control, the ADC sampling rate is as high as 2M, and the FOC algorithm is used as the core control algorithm. As shown in the picture is the motor drive board.</p>
<p><figure><img src="/images/Ostrich/pcb1.png"/>
</figure>

<figure><img src="/images/Ostrich/pcb2.png"/><figcaption>
            <h4>FOC driver PCB diagram</h4>
        </figcaption>
</figure>
</p>
<h4 id="foc-control-algorithm">FOC Control Algorithm</h4>
<p><strong>Control at Low Speeds</strong></p>
<p>Due to the difference in control principles, brushless ESC can only control the motor to work at high speed, and it is difficult to control at low speed; FOC controllers, on the other hand, do not have this limitation at all, and can be precisely controlled at any speed.</p>
<p><strong>Motor Commutation</strong></p>
<p>For the same reason, because the non-inductive ESC cannot feedback the rotor position, it is difficult to realize the commutation of the forward and reverse rotation of the motor; The commutation performance of the FOC driver is extremely excellent, and the forward and reverse switching can be very smooth at the highest speed; In addition, FOC can also perform brake control in the form of energy recovery.</p>
<p><strong>Torque Control</strong></p>
<p>Ordinary ESCs can only control the speed of the motor, while FOC can carry out three closed-loop control of current (torque), speed, and position.</p>
<p><strong>Noises</strong></p>
<p>The noise of the FOC driver will be much less than that of the ESC, because the ordinary ESC uses a square wave drive, while the FOC is a sine wave. Brushless
The drive circuit of the motor is mainly realized by using a three-phase inverter circuit:</p>
<figure><img src="/images/Ostrich/foc.png"/><figcaption>
            <h4>three-phase inverter circuit</h4>
        </figcaption>
</figure>

<h4 id="motor-parameter-acquisition">Motor Parameter Acquisition</h4>
<p>The idea of the LQR algorithm is adopted:</p>
<p>$$
\begin{aligned}
J=q_{11} \theta^2+q_{22} \omega^2+q_{33} i^2+r U^2
\end{aligned}
$$</p>
<p>Because $\theta$ is divergent, control as feedback is necessarily unstable, using $\Delta\theta$ as a feedback state variable. Since $\theta$ does not converge, the following equation is absolutely satisfied:</p>
<p>$$
\begin{aligned}
&amp; q_{11} \Delta \theta^2+q_{22} \omega^2+q_{33} i^2+r U^2 \leq q_{11} \theta^2+q_{22} \omega^2+q_{33} i^2+r U^2 \
\end{aligned}
$$</p>
<p>$$
\begin{aligned}
&amp; q_{11} \Delta \theta^2+q_{22} \omega^2+q_{33} i^2+r U^2 \leq J .
\end{aligned}
$$</p>
<p>It can be seen from the above equation that $K_1$, $K_2$, and $K_3$ are the feedback coefficients of the state variables $\theta$, $w$, and $i$, respectively, so $K_1$, $K_2$, and $K_3$ must satisfy the state variables $\Delta\theta$, $w$, and $i$ for control.</p>
<h2 id="gait-control-design">Gait Control Design</h2>
<p>It mainly adopts the algorithm of ZMP and linear inverted pendulum.</p>
<h4 id="zmp-algorithm">ZMP Algorithm</h4>
<p>ZMP is the resultant force point of the ground against the robot calculated under the condition that the robot will not overturn, and when the robot is in dynamic motion (there is acceleration), the ground force is balanced with gravity and inertial force with ZMP as the action point. Since gravity does not change, when the height of the center of mass is unchanged, the position of ZMP (single point support, supporting polygon is a point) corresponds to the acceleration of the center of mass. The support point of the linear inverted pendulum is his ZMP.</p>
<figure><img src="/images/Ostrich/zmp.png"/><figcaption>
            <h4>ZMP algorithm</h4>
        </figcaption>
</figure>

<h4 id="linear-inverted-pendulum">Linear Inverted Pendulum</h4>
<p>The problem of linear secondary regulator (LQR) has a very important position in modern control theory and has received widespread attention from the control community. The linear quadratic performance index is easy to analyze, process and calculate, and the inverted pendulum system obtained by the linear quadratic optimal design method has the advantages of good robustness and dynamic characteristics and linear feedback structure, so it has been widely used in the actual design of inverted pendulum control system.</p>
<p>The input of the inverted pendulum system is the expected value of the displacement (i.e. position) of the bipedal robot and the tilt angle of the pendulum, and the computer collects the actual position signal of the robot and the reference surface from the sensor in each sampling cycle, compares it with the expected value, obtains the control amount through the control algorithm, and then drives the DC motor through digital-to-analog conversion to realize the real-time control of the inverted pendulum.</p>
<p><strong>The principle of balancing a bipedal velocity ring:</strong></p>
<p>According to experience, the running speed of the wheel-legged robot is related to the inclination angle of the wheel-legged robot, such as the wheel-legged robot leaning forward, is it the upright ring to accelerate the wheel-legged robot forward, so that the wheel-legged robot maintains balance, at this time the wheel-legged robot does not have speed. If the speed is controlled in a closed loop, then this loop is not a speed loop. If the target of the speed ring is set to 0, the wheel-legged robot can stabilize the balance for a long time.</p>
<p>However, in the balance car system, which is dominated by upright, the speed control of negative feedback will cause the trolley to accelerate down. Here we represent the control of the speed closed-loop by keeping the wheel leg robot at a certain angle and using the process of balancing the trolley.</p>
<h2 id="conclusion">Conclusion</h2>
<h4 id="key-innovations">Key Innovations</h4>
<p>The innovation points of this device mainly include three innovative mechanisms and control algorithms:</p>
<p><strong>Parallel five-pole structure</strong></p>
<p>Since the tandem leg structure has high requirements for the joint drive motor and the control accuracy is difficult to guarantee, we use the closed-chain five-bar mechanism as the bionic leg structure, and the simulation results show that the leg structure can realize the rapid and stable running of the legs of the bionic ostrich, and the joint driving torque is small, which verifies the feasibility and rationality of the leg structure to realize the bionic gait running of the robot.</p>
<p><strong>Wheel-leg composite structure</strong></p>
<p>This bionic wheel-foot composite mobile robot combines the high efficiency of the wheeled robot on the flat road surface and the cross-country ability of the foot-type robot on the rough road, and the movement of the wheeled structure can cleverly mimic the ostrich whose toes are about to end the touch, so that the reaction force between it and the ground suddenly increases, resulting in the &ldquo;pedaling force&rdquo;.</p>
<p><strong>Innovative variable foot mechanism</strong></p>
<p>The wheel-foot mechanism switches freely through the two cells at the upper and lower dead center in the four stages of the entire trip, switching the movement mode, and a total of ankle joint, rigid grounded standing, electronic suspension, folding storage mechanical structure is ingenious.</p>
<p><strong>Control algorithm</strong></p>
<p>Adaptively adjusts left and right leg heights and controls body balance to cope with rapid movement on uneven ground. The LQR algorithm is used with the hub motor to flexibly and stably switch the robot motion state, such as the emergency stop movement during the running process.</p>
<h4 id="application-prospect">Application Prospect</h4>
<p>Wheel-legged composite robot is a new type of ground moving system based on wheeled robot by optimizing the wheel design to achieve fast and flexible movement. The main body of the robot is composed of a frame, two spindles, a gear reduction mechanism, and a wheel leg composite mechanism, which is driven by a single motor, and the control system is relatively simple. Compared with ordinary wheeled robots, the robot has a strong ability to cross obstacles, and has a lean structure, small size and light weight. This bionic wheel-foot composite mobile robot combines the high efficiency of wheeled robots on flat roads and the off-road ability of foot-based robots on rough roads, and has broad application scenarios.</p>
<figure><img src="/images/Ostrich/IMG_9545.PNG"/>
</figure></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2023-07-13</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://jiajianfu.github.io/posts/ostrichrobot/" data-title="Robot Design｜Bionic Ostrich Robot" data-via="@JiajianFu" data-hashtags="Bionic Ostrich Robot"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on WhatsApp" data-sharer="whatsapp" data-url="https://jiajianfu.github.io/posts/ostrichrobot/" data-title="Robot Design｜Bionic Ostrich Robot" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Reddit" data-sharer="reddit" data-url="https://jiajianfu.github.io/posts/ostrichrobot/"><i class="fab fa-reddit fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="https://jiajianfu.github.io/posts/ostrichrobot/" data-title="Robot Design｜Bionic Ostrich Robot"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="https://jiajianfu.github.io/posts/ostrichrobot/" data-title="Robot Design｜Bionic Ostrich Robot" data-image="/images/Ostrich/ostrichcover.png"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/bionic-ostrich-robot/">Bionic Ostrich Robot</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/mx_2_engineer/" class="prev" rel="prev" title="Robot Design｜MX_2 Engineer"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Robot Design｜MX_2 Engineer</a>
            <a href="/posts/clock/" class="next" rel="next" title="Art Design｜Gem Clock Necklace">Art Design｜Gem Clock Necklace<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.115.1">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2023</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Jiajian Fu</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"cookieconsent":{"content":{"dismiss":"Got it!","link":"Learn more","message":"This website uses Cookies to improve your experience."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":50}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script>
			var _hmt = _hmt || [];
			(function() {
			  var hm = document.createElement("script");
			  hm.src = "https://hm.baidu.com/hm.js?3133c50bd95509af21e148479da12da1";
			  var s = document.getElementsByTagName("script")[0]; 
			  s.parentNode.insertBefore(hm, s);
			})();
		</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EJ3WD0DNWP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EJ3WD0DNWP');
</script></body>
</html>
